!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(){var a,d,e,f,g,h,i,j,k,l,m,n,o,p,q;window.console&&window.console.log&&(l=function(){var a;return a=[],m(arguments).forEach(function(b){return"string"==typeof b?a=a.concat(p(b)):a.push(b)}),q.apply(window,a)},q=function(){return console.log.apply(console,m(arguments))},m=function(a){return Array.prototype.slice.call(a)},e=[{regex:/\*([^\*]+)\*/,replacer:function(a,b){return"%c"+b+"%c"},styles:function(){return["font-style: italic",""]}},{regex:/\_([^\_]+)\_/,replacer:function(a,b){return"%c"+b+"%c"},styles:function(){return["font-weight: bold",""]}},{regex:/\`([^\`]+)\`/,replacer:function(a,b){return"%c"+b+"%c"},styles:function(){return["background: rgb(255, 255, 219); padding: 1px 5px; border: 1px solid rgba(0, 0, 0, 0.1)",""]}},{regex:/\[c\=(?:\"|\')?((?:(?!(?:\"|\')\]).)*)(?:\"|\')?\]((?:(?!\[c\]).)*)\[c\]/,replacer:function(a,b,c){return"%c"+c+"%c"},styles:function(a){return[a[1],""]}}],g=function(a){var b;return b=!1,e.forEach(function(c){return c.regex.test(a)?b=!0:void 0}),b},f=function(a){var b;return b=[],e.forEach(function(c){var d;return d=a.match(c.regex),d?b.push({format:c,match:d}):void 0}),b.sort(function(a,b){return a.match.index-b.match.index})},p=function(a){var b,c,d;for(d=[];g(a);)c=f(a),b=c[0],a=a.replace(b.format.regex,b.format.replacer),d=d.concat(b.format.styles(b.match));return[a].concat(d)},k=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},j=function(){return/OPR/.test(navigator.userAgent)&&/Opera/.test(navigator.vendor)},h=function(){return/Firefox/.test(navigator.userAgent)},i=function(){return/MSIE/.test(navigator.userAgent)},o=function(){var a;return a=navigator.userAgent.match(/AppleWebKit\/(\d+)\.(\d+)(\.|\+|\s)/),a?537.38<=parseInt(a[1],10)+parseInt(a[2],10)/100:!1},n=function(){var a;return a=navigator.userAgent.match(/OPR\/(\d+)\./),a?15<=parseInt(a[1],10):!1},d=function(){return window.console.firebug||window.console.exception},a=i()||h()&&!d()||j()&&!n()||k()&&!o()?q:l,a.l=q,"function"==typeof define&&define.amd?define(a):"undefined"!=typeof c?b.exports=a:window.log=a)}).call(this)},{}],2:[function(a,b){var c,d;d=a("es6-promise").Promise,c=function(){function a(a,b,c,d){this.lbPromised=a,this.pluralModelName=b,this.accessToken=c,this.debug=d}return a.prototype.setAccessToken=function(a){this.accessToken=a},a.prototype.request=function(a,b,c){return null==b&&(b={}),this.lbPromised.request(this.pluralModelName,a,b,c,this)},a.prototype.count=function(a){var b,c,d;return null==a&&(a={}),d="/count",b="GET",c={},Object.keys(a)&&(c.where=a),this.request(d,c,b)},a.prototype.create=function(a){var b,c,e,f;return null==a&&(a={}),Array.isArray(a)?d.all(function(){var c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.create(b));return e}.call(this)):(f="",c="POST",e=a,this.request(f,e,c))},a.prototype.upsert=function(a){var b,c,d;return null==a&&(a={}),d="",b="PUT",c=a,this.request(d,c,b)},a.prototype.exists=function(a){var b,c,d;return d="/"+a+"/exists",b="GET",c=null,this.request(d,c,b)},a.prototype.findById=function(a){var b,c,d;return d="/"+a,b="GET",c=null,this.request(d,c,b)},a.prototype.find=function(a){var b,c,e;return null!=a&&null===a.where?d.resolve([]):(e="",b="GET",c={filter:a},this.request(e,c,b))},a.prototype.findOne=function(a){var b,c,d;return d="/findOne",b="GET",c={filter:a},this.request(d,c,b)["catch"](function(a){if(a.isLoopBackResponseError&&"MODEL_NOT_FOUND"===a.code)return null;throw a})},a.prototype.destroyById=function(a){var b,c,d;return d="/"+a,b="DELETE",c=null,this.request(d,c,b)},a.prototype.updateAttributes=function(a,b){var c,d,e;return e="/"+a,c="PUT",d=b,this.request(e,d,c)},a.prototype.updateAll=function(a,b){var c,d,e;return e="/update?where="+JSON.stringify(a),c="POST",d=b,this.request(e,d,c)},a}(),b.exports=c},{"es6-promise":7}],3:[function(a,b){var c,d,e,f,g,h,i;d=a("./loopback-client"),g=a("./loopback-user-client"),f=a("./loopback-related-client"),h=a("es6-promise").Promise,i=a("superagent"),c=a("./util/debug-logger"),e=function(){function a(a,b,c){this.baseURL=a,this.logger=b,this.version=c}return a.createInstance=function(b){return null==b&&(b={}),new a(b.baseURL,b.logger,b.version)},a.prototype.request=function(a,b,c,d,e){var f;return null==c&&(c={}),null==e&&(e={}),f="/"+a+b,this.constructor.requestStatic(f,c,d,e,this)},a.requestStatic=function(a,b,d,e,f){var g,j,k,l,m,n,o;return null==b&&(b={}),null==e&&(e={}),g=e.accessToken,l=e.debug,k=f.baseURL,n=f.logger,o=f.version,l&&(m=new c(a,b,d,e,f)),j=this.agentMethodMap[d],k?null==j?h.reject(new Error("no agent method for http_method:  "+d)):(l&&m.showRequestInfo(),new h(function(c,d){var e,f,h,n,p;if(n=null!=o?k+"/"+o+a:k+a,h=i[j](n),g&&h.set("Authorization",g),"get"===j){e={};for(f in b)p=b[f],"function"!=typeof p&&(e[f]="object"==typeof p?JSON.stringify(p):p);h.query(e)}else Object.keys(b).length&&(h.send(JSON.stringify(b)),h.set("Content-Type","application/json"));return h.end(function(a,b){var e,g,h;if(a)return l&&m.showErrorInfo(a),void d(a);try{h=204===b.statusCode?{}:JSON.parse(b.text)}catch(i){e=i,h={error:b.text}}if(l&&m.showResponseInfo(h,b),h.error){if("object"==typeof h.error){a=new Error,g=h.error;for(f in g)p=g[f],a[f]=p;a.isLoopBackResponseError=!0}else a=new Error(h.error);return d(a)}return c(h)})})):h.reject("baseURL is required.")},a.prototype.createClient=function(a,b){var c,e;return null==b&&(b={}),b.belongsTo?(e=Object.keys(b.belongsTo)[0],c=b.belongsTo[e],this.createRelatedClient({one:e,many:a,id:c,accessToken:b.accessToken,debug:b.debug})):b.isUserModel?this.createUserClient(a,b):new d(this,a,b.accessToken,b.debug)},a.prototype.createUserClient=function(a,b){return null==b&&(b={}),new g(this,a,b.accessToken,b.debug)},a.prototype.createRelatedClient=function(a){return new f(this,a.one,a.many,a.id,a.accessToken,a.debug)},a.agentMethodMap={DELETE:"del",PUT:"put",GET:"get",POST:"post",HEAD:"head"},a}(),e.Promise=h,b.exports=e},{"./loopback-client":2,"./loopback-related-client":4,"./loopback-user-client":5,"./util/debug-logger":6,"es6-promise":7,superagent:9}],4:[function(a,b){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;e=a("es6-promise").Promise,c=a("./loopback-client"),d=function(a){function b(a,b,c,d,e,f){this.lbPromised=a,this.pluralModelName=b,this.pluralModelNameMany=c,this.id=d,this.accessToken=e,this.debug=f}return f(b,a),b.prototype.setId=function(a){this.id=a},b.prototype.request=function(a,b,c){return null==b&&(b={}),a="/"+this.id+"/"+this.pluralModelNameMany+a,this.lbPromised.request(this.pluralModelName,a,b,c,this)},b.prototype.upsert=function(a){var b,c,d;if(null==a&&(a={}),null!=a.id){c={};for(b in a)d=a[b],"id"!==b&&(c[b]=d);return this.updateAttributes(a.id,c)}return this.create(a)},b.prototype.exists=function(a){return this.findById(a).then(function(){return{exists:!0}})["catch"](function(a){if(a.isLoopBackResponseError)return{exists:!1};throw a})},b.prototype.findOne=function(a){return this.find(a).then(function(a){return a[0]})},b.prototype.updateAll=function(a,b){return this.find({where:a,fields:"id"}).then(function(a){return function(c){var d;return e.all(function(){var a,e,f;for(f=[],a=0,e=c.length;e>a;a++)d=c[a],f.push(this.updateAttributes(d.id,b));return f}.call(a))}}(this))},b}(c),b.exports=d},{"./loopback-client":2,"es6-promise":7}],5:[function(a,b){var c,d,e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;c=a("./loopback-client"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.confirm=function(a,b,c){var d,e,f;return f="/confirm",d="GET",e={uid:a,token:b,redirect:c},this.request(f,e,d)},b.prototype.login=function(a,b){var c,d,e;return e="/login",b&&(e+="?include="+b),c="POST",d=a,this.request(e,d,c)},b.prototype.logout=function(a){var b,c,d;return d="/logout?access_token="+a,b="POST",c=null,this.request(d,c,b)},b.prototype.resetPassword=function(a){var b,c,d;return d="/logout?access_token="+accessTokenID,b="POST",c={email:a},this.request(d,c,b)},b}(c),b.exports=d},{"./loopback-client":2}],6:[function(a,b){var c,d,e,f,g,h,i,j,k,l=[].slice,m={}.hasOwnProperty;k=function(){var a,b;for(b=[],i=a=0;20>=a;i=++a)b.push("    ");return b}(),e={red:"31",green:"32",yellow:"33",blue:"34",purple:"35",cyan:"36"},f=Object.keys(e),h="undefined"!=typeof Ti&&null!==Ti?"ti":"undefined"!=typeof window&&null!==window?"web":"node",d=function(){switch(h){case"ti":case"node":return function(a,b){var c;return b&&e[b]?(c=e[b],"["+c+"m"+a+"[39m"):a};case"web":return function(a,b){return'[c="color: '+b+'"]'+a+"[c]"}}}(),g=function(){switch(h){case"ti":return{info:function(a){return Ti.API.info(a)},warn:function(a){return Ti.API.info(a)},error:function(a){return Ti.API.info(a)},trace:function(a){return Ti.API.trace(a)}};case"web":return j=a("../../../bower_components/log/log"),{info:function(a){return j(a)},warn:function(a){return j("[WARN] "+a)},error:function(a){return j("[ERROR] "+a)},trace:function(a){return j("[TRACE] "+a)}};default:return console}}(),c=function(){function a(a,b,c,e,h){var i,j,k;this.endpoint=a,this.params=b,this.http_method=c,this.clientInfo=e,this.lbPromisedInfo=h,j=this.clientInfo,this.accessToken=j.accessToken,this.debug=j.debug,k=this.lbPromisedInfo,this.baseURL=k.baseURL,this.logger=k.logger,this.version=k.version,null==this.logger&&(this.logger=g),this.logger.now=function(a){return function(){var b,c,e;return a.startDate?(c=new Date,e=c.getTime()-a.startDate.getTime(),b=50>e?"green":250>e?"yellow":"red",c.toString()+" "+d(e+"ms",b)):(a.startDate=new Date,a.startDate.toString())}}(this),i=this.constructor.counter=(this.constructor.counter+1)%f.length,this.color=f[i],this.mark=d("●",this.color)}return a.counter=0,a.prototype.log=function(){var a,b;return b=1<=arguments.length?l.call(arguments,0):[],(a=this.logger).info.apply(a,[this.mark].concat(l.call(b)))},a.prototype.showHeader=function(a){var b;b=k[0],this.logger.info("\n"),this.logger.info("┏────────────────────────────────────────────────────────────────────────────────"),this.logger.info("┃ "+this.mark+" "+this.logger.now()),this.logger.info("┃ loopback-promised  "+this.baseURL),this.logger.info("┃ "+a+"  ["+this.http_method+"]: "+this.endpoint),this.logger.info("┃ "+b+"accessToken: "+(this.accessToken?this.accessToken.slice(0,20)+"...":null))},a.prototype.showFooter=function(){this.logger.info("┗────────────────────────────────────────────────────────────────────────────────")},a.prototype.showParams=function(a,b,c,d){var e,f,g,h,j,l,n,o,p,q,r;if(null==c&&(c=1),null==d&&(d=4),p=k.slice(0,c).join(""),q=k[0],Array.isArray(b))if(0===b.length)this.logger.info("┃ "+p+a+": []");else{for(this.logger.info("┃ "+p+a+": ["),i=e=0,h=b.length;h>e;i=++e)r=b[i],this.showParams("["+i+"]",r,c+1,d);this.logger.info("┃ "+p+"]")}else if("function"==typeof(null!=b?b.toISOString:void 0))this.logger.info("┃ "+p+a+": ["+(null!=(o=b.constructor)?o.name:void 0)+"] "+b.toISOString());else if("error"===a&&"object"==typeof b&&"string"==typeof(null!=b?b.stack:void 0)){this.logger.info("┃ "+p+a+":");for(f in b)if(m.call(b,f))if(r=b[f],"stack"!==f)this.showParams(f,r,c+1,d);else for(n=r.split("\n"),this.logger.info("┃ "+p+q+"stack:"),g=0,j=n.length;j>g;g++)l=n[g],this.logger.info("┃ "+p+q+q+l)}else if(null!=b&&"object"==typeof b&&Object.keys(b).length>0&&d>=c){this.logger.info("┃ "+p+a+":");for(f in b)m.call(b,f)&&(r=b[f],this.showParams(f,r,c+1,d))}else this.logger.info("┃ "+p+a+": "+JSON.stringify(b))},a.prototype.showRequestInfo=function(){var a;a=k[0],this.showHeader(">> "+d("REQUEST","purple")),this.showParams("params",this.params,1),this.showFooter()},a.prototype.showErrorInfo=function(a){var b;b=k[0],this.showHeader("<< "+d("ERROR","red")),this.showParams("Error",a,1),this.showFooter()},a.prototype.showResponseInfo=function(a,b){var c,e;e=k[0],c=a.error?d(b.status,"red"):d(b.status,"green"),this.showHeader("<< "+d("RESPONSE","cyan")),this.logger.info("┃ "+e+"status: "+c),this.showParams("responseBody",a,1),this.showFooter()},a}(),b.exports=c},{"../../../bower_components/log/log":1}],7:[function(a,b){(function(a,c){(function(){"use strict";function d(a){return"function"==typeof a||"object"==typeof a&&null!==a}function e(a){return"function"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(){}function h(){return function(){a.nextTick(l)}}function i(){var a=0,b=new O(l),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function j(){var a=new MessageChannel;return a.port1.onmessage=l,function(){a.port2.postMessage(0)}}function k(){return function(){setTimeout(l,1)}}function l(){for(var a=0;L>a;a+=2){var b=Q[a],c=Q[a+1];b(c),Q[a]=void 0,Q[a+1]=void 0}L=0}function m(){}function n(){return new TypeError("You cannot resolve a promise with itself")}function o(){return new TypeError("A promises callback cannot return that same promise.")}function p(a){try{return a.then}catch(b){return U.error=b,U}}function q(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function r(a,b,c){M(function(a){var d=!1,e=q(c,b,function(c){d||(d=!0,b!==c?u(a,c):w(a,c))},function(b){d||(d=!0,x(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,x(a,e))},a)}function s(a,b){b._state===S?w(a,b._result):a._state===T?x(a,b._result):y(b,void 0,function(b){u(a,b)},function(b){x(a,b)})}function t(a,b){if(b.constructor===a.constructor)s(a,b);else{var c=p(b);c===U?x(a,U.error):void 0===c?w(a,b):e(c)?r(a,b,c):w(a,b)}}function u(a,b){a===b?x(a,n()):d(b)?t(a,b):w(a,b)}function v(a){a._onerror&&a._onerror(a._result),z(a)}function w(a,b){a._state===R&&(a._result=b,a._state=S,0===a._subscribers.length||M(z,a))}function x(a,b){a._state===R&&(a._state=T,a._result=b,M(v,a))}function y(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+S]=c,e[f+T]=d,0===f&&a._state&&M(z,a)}function z(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?C(c,d,e,f):e(f);a._subscribers.length=0}}function A(){this.error=null}function B(a,b){try{return a(b)}catch(c){return V.error=c,V}}function C(a,b,c,d){var f,g,h,i,j=e(c);if(j){if(f=B(c,d),f===V?(i=!0,g=f.error,f=null):h=!0,b===f)return void x(b,o())}else f=d,h=!0;b._state!==R||(j&&h?u(b,f):i?x(b,g):a===S?w(b,f):a===T&&x(b,f))}function D(a,b){try{b(function(b){u(a,b)},function(b){x(a,b)})}catch(c){x(a,c)}}function E(a,b,c,d){this._instanceConstructor=a,this.promise=new a(m,d),this._abortOnReject=c,this._validateInput(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._init(),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):x(this.promise,this._validationError())}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(a){this._id=_++,this._state=void 0,this._result=void 0,this._subscribers=[],m!==a&&(e(a)||F(),this instanceof H||G(),D(this,a))}var I;I=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var J,K=I,L=(Date.now||function(){return(new Date).getTime()},Object.create||function(a){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof a)throw new TypeError("Argument must be an object");return g.prototype=a,new g},0),M=function(a,b){Q[L]=a,Q[L+1]=b,L+=2,2===L&&J()},N="undefined"!=typeof window?window:{},O=N.MutationObserver||N.WebKitMutationObserver,P="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Q=new Array(1e3);J="undefined"!=typeof a&&"[object process]"==={}.toString.call(a)?h():O?i():P?j():k();var R=void 0,S=1,T=2,U=new A,V=new A;E.prototype._validateInput=function(a){return K(a)},E.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},E.prototype._init=function(){this._result=new Array(this.length)};var W=E;E.prototype._enumerate=function(){for(var a=this.length,b=this.promise,c=this._input,d=0;b._state===R&&a>d;d++)this._eachEntry(c[d],d)},E.prototype._eachEntry=function(a,b){var c=this._instanceConstructor;f(a)?a.constructor===c&&a._state!==R?(a._onerror=null,this._settledAt(a._state,b,a._result)):this._willSettleAt(c.resolve(a),b):(this._remaining--,this._result[b]=this._makeResult(S,b,a))},E.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===R&&(this._remaining--,this._abortOnReject&&a===T?x(d,c):this._result[b]=this._makeResult(a,b,c)),0===this._remaining&&w(d,this._result)},E.prototype._makeResult=function(a,b,c){return c},E.prototype._willSettleAt=function(a,b){var c=this;y(a,void 0,function(a){c._settledAt(S,b,a)},function(a){c._settledAt(T,b,a)})};var X=function(a,b){return new W(this,a,!0,b).promise},Y=function(a,b){function c(a){u(f,a)}function d(a){x(f,a)}var e=this,f=new e(m,b);if(!K(a))return x(f,new TypeError("You must pass an array to race.")),f;for(var g=a.length,h=0;f._state===R&&g>h;h++)y(e.resolve(a[h]),void 0,c,d);return f},Z=function(a,b){var c=this;if(a&&"object"==typeof a&&a.constructor===c)return a;var d=new c(m,b);return u(d,a),d},$=function(a,b){var c=this,d=new c(m,b);return x(d,a),d},_=0,ab=H;H.all=X,H.race=Y,H.resolve=Z,H.reject=$,H.prototype={constructor:H,then:function(a,b){var c=this,d=c._state;if(d===S&&!a||d===T&&!b)return this;var e=new this.constructor(m),f=c._result;if(d){var g=arguments[d-1];M(function(){C(d,e,g,f)})}else y(c,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var bb=function(){var a;a="undefined"!=typeof c?c:"undefined"!=typeof window&&window.document?window:self;var b="Promise"in a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;return new a.Promise(function(a){b=a}),e(b)}();b||(a.Promise=ab)},cb={Promise:ab,polyfill:bb};"function"==typeof define&&define.amd?define(function(){return cb}):"undefined"!=typeof b&&b.exports?b.exports=cb:"undefined"!=typeof this&&(this.ES6Promise=cb)}).call(this)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:8}],8:[function(a,b){function c(){if(!g){g=!0;for(var a,b=f.length;b;){a=f,f=[];for(var c=-1;++c<b;)a[c]();b=f.length}g=!1}}function d(){}var e=b.exports={},f=[],g=!1;e.nextTick=function(a){f.push(a),g||setTimeout(c,0)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],9:[function(a,b){function c(){}function d(a){var b={}.toString.call(a);switch(b){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function e(){if(q.XMLHttpRequest&&("file:"!=q.location.protocol||!q.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}return!1}function f(a){return a===Object(a)}function g(a){if(!f(a))return a;var b=[];for(var c in a)null!=a[c]&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}function h(a){for(var b,c,d={},e=a.split("&"),f=0,g=e.length;g>f;++f)c=e[f],b=c.split("="),d[decodeURIComponent(b[0])]=decodeURIComponent(b[1]);return d}function i(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;i>h;++h)c=f[h],b=c.indexOf(":"),d=c.slice(0,b).toLowerCase(),e=r(c.slice(b+1)),g[d]=e;return g}function j(a){return a.split(/ *; */).shift()}function k(a){return p(a.split(/ *; */),function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})}function l(a,b){b=b||{},this.req=a,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method?this.xhr.responseText:null,this.setStatusProperties(this.xhr.status),this.header=this.headers=i(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function m(a,b){var c=this;o.call(this),this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var a=null,b=null;try{b=new l(c)}catch(d){a=new Error("Parser is unable to parse the response"),a.parse=!0,a.original=d}c.callback(a,b)})}function n(a,b){return"function"==typeof b?new m("GET",a).end(b):1==arguments.length?new m("GET",a):new m(a,b)}var o=a("emitter"),p=a("reduce"),q="undefined"==typeof window?this:window,r="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};n.serializeObject=g,n.parseString=h,n.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},n.serialize={"application/x-www-form-urlencoded":g,"application/json":JSON.stringify},n.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},l.prototype.get=function(a){return this.header[a.toLowerCase()]},l.prototype.setHeaderProperties=function(){var a=this.header["content-type"]||"";this.type=j(a);var b=k(a);for(var c in b)this[c]=b[c]},l.prototype.parseBody=function(a){var b=n.parse[this.type];return b&&a&&a.length?b(a):null},l.prototype.setStatusProperties=function(a){var b=a/100|0;this.status=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.clientError=4==b,this.serverError=5==b,this.error=4==b||5==b?this.toError():!1,this.accepted=202==a,this.noContent=204==a||1223==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.notFound=404==a,this.forbidden=403==a},l.prototype.toError=function(){var a=this.req,b=a.method,c=a.url,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.url=c,e},n.Response=l,o(m.prototype),m.prototype.use=function(a){return a(this),this},m.prototype.timeout=function(a){return this._timeout=a,this},m.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},m.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},m.prototype.set=function(a,b){if(f(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},m.prototype.unset=function(a){return delete this._header[a.toLowerCase()],delete this.header[a],this},m.prototype.getHeader=function(a){return this._header[a.toLowerCase()]},m.prototype.type=function(a){return this.set("Content-Type",n.types[a]||a),this},m.prototype.accept=function(a){return this.set("Accept",n.types[a]||a),this},m.prototype.auth=function(a,b){var c=btoa(a+":"+b);return this.set("Authorization","Basic "+c),this},m.prototype.query=function(a){return"string"!=typeof a&&(a=g(a)),a&&this._query.push(a),this},m.prototype.field=function(a,b){return this._formData||(this._formData=new FormData),this._formData.append(a,b),this},m.prototype.attach=function(a,b,c){return this._formData||(this._formData=new FormData),this._formData.append(a,b,c),this},m.prototype.send=function(a){var b=f(a),c=this.getHeader("Content-Type");if(b&&f(this._data))for(var d in a)this._data[d]=a[d];else"string"==typeof a?(c||this.type("form"),c=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==c?this._data?this._data+"&"+a:a:(this._data||"")+a):this._data=a;return b?(c||this.type("json"),this):this},m.prototype.callback=function(a,b){var c=this._callback;return this.clearTimeout(),2==c.length?c(a,b):a?this.emit("error",a):void c(b)},m.prototype.crossDomainError=function(){var a=new Error("Origin is not allowed by Access-Control-Allow-Origin");a.crossDomain=!0,this.callback(a)},m.prototype.timeoutError=function(){var a=this._timeout,b=new Error("timeout of "+a+"ms exceeded");b.timeout=a,this.callback(b)},m.prototype.withCredentials=function(){return this._withCredentials=!0,this},m.prototype.end=function(a){var b=this,f=this.xhr=e(),g=this._query.join("&"),h=this._timeout,i=this._formData||this._data;if(this._callback=a||c,f.onreadystatechange=function(){return 4==f.readyState?0==f.status?b.aborted?b.timeoutError():b.crossDomainError():void b.emit("end"):void 0},f.upload&&(f.upload.onprogress=function(a){a.percent=a.loaded/a.total*100,b.emit("progress",a)}),h&&!this._timer&&(this._timer=setTimeout(function(){b.abort()},h)),g&&(g=n.serializeObject(g),this.url+=~this.url.indexOf("?")?"&"+g:"?"+g),f.open(this.method,this.url,!0),this._withCredentials&&(f.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof i&&!d(i)){var j=n.serialize[this.getHeader("Content-Type")];j&&(i=j(i))}for(var k in this.header)null!=this.header[k]&&f.setRequestHeader(k,this.header[k]);return this.emit("request",this),f.send(i),this},n.Request=m,n.get=function(a,b,c){var d=n("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},n.head=function(a,b,c){var d=n("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.del=function(a,b){var c=n("DELETE",a);return b&&c.end(b),c},n.patch=function(a,b,c){var d=n("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.post=function(a,b,c){var d=n("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.put=function(a,b,c){var d=n("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},b.exports=n},{emitter:10,reduce:11}],10:[function(a,b){function c(a){return a?d(a):void 0}function d(a){for(var b in c.prototype)a[b]=c.prototype[b];return a}b.exports=c,c.prototype.on=c.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},c.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=c.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},c.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},c.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},c.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],11:[function(a,b){b.exports=function(a,b,c){for(var d=0,e=a.length,f=3==arguments.length?c:a[d++];e>d;)f=b.call(null,f,a[d],++d,a);return f}},{}],12:[function(a){window.LoopBackPromised=a("./dist/lib/loopback-promised")},{"./dist/lib/loopback-promised":3}]},{},[12]);